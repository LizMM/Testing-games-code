<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Kids Connections - Daily Challenge</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    html, body {
      height: 100%;
      overflow: hidden;
      position: fixed;
      width: 100%;
    }
    
    body {
      font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive, sans-serif;
      background: linear-gradient(135deg, #FFD93D 0%, #FF6B9D 50%, #C8B6FF 100%);
      background-attachment: fixed;
    }
    
    .screen {
      display: none;
      width: 100%;
      height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .screen.active { 
      display: flex;
      flex-direction: column;
    }
    
    /* HOME SCREEN */
    .home-screen {
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 15px;
      text-align: center;
    }
    
    .home-screen.active {
      display: flex;
    }
    
    .home-title {
      color: white;
      font-size: 38px;
      font-weight: 900;
      text-shadow: 3px 3px 0 #FF1493, 5px 5px 0 #00CED1;
      letter-spacing: 2px;
      margin-bottom: 15px;
    }
    
    .daily-info {
      background: white;
      padding: 12px;
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      border: 3px solid #FF6B9D;
      max-width: 350px;
    }
    
    .daily-info h2 {
      font-size: 18px;
      color: #FF1493;
      margin-bottom: 6px;
    }
    
    .daily-info p {
      font-size: 13px;
      color: #333;
      margin-bottom: 4px;
    }
    
    .score-display {
      font-size: 24px;
      font-weight: 900;
      color: #00CED1;
      margin-top: 6px;
    }
    
    .difficulty-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      max-width: 350px;
    }
    
    .difficulty-btn {
      padding: 18px;
      font-size: 22px;
      font-weight: 900;
      border-radius: 15px;
      border: 4px solid white;
      cursor: pointer;
      color: white;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
    }
    
    .difficulty-btn.easy {
      background: linear-gradient(135deg, #00FA9A 0%, #00CED1 100%);
    }
    
    .difficulty-btn.medium {
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
    }
    
    .difficulty-btn.hard {
      background: linear-gradient(135deg, #FF6B9D 0%, #FF1493 100%);
    }
    
    .difficulty-btn:hover {
      transform: scale(1.03);
    }
    
    .puzzle-status {
      font-size: 12px;
      margin-top: 6px;
      opacity: 0.9;
    }
    
    /* GAME SCREEN - ULTRA COMPACT FOR IPAD */
    .container {
      padding: 4px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .header {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      margin-bottom: 4px;
      flex-shrink: 0;
    }
    
    h1 {
      color: white;
      font-size: 20px;
      font-weight: 900;
      text-shadow: 2px 2px 0 #FF1493, 3px 3px 0 #00CED1;
      letter-spacing: 1px;
    }
    
    .home-btn, .sound-toggle {
      position: absolute;
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
      border: 2px solid white;
      border-radius: 50%;
      width: 34px;
      height: 34px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: transform 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .home-btn { left: 0; }
    .sound-toggle { right: 0; }
    
    .puzzle-selector {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin-bottom: 3px;
      background: linear-gradient(135deg, #FF6B9D 0%, #FFA07A 100%);
      padding: 4px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      border: 2px solid white;
      flex-shrink: 0;
    }
    
    .puzzle-name {
      font-size: 11px;
      font-weight: 900;
      color: white;
      text-align: center;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.2);
    }
    
    .nav-btn {
      padding: 3px 8px;
      font-size: 11px;
      font-weight: 700;
      border-radius: 6px;
      border: 2px solid white;
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
      color: white;
      cursor: pointer;
    }
    
    .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
    
    .strikes {
      text-align: center;
      font-size: 14px;
      margin-bottom: 3px;
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
      padding: 3px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      border: 2px solid white;
      font-weight: 900;
      color: white;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.2);
      flex-shrink: 0;
    }
    
    .message {
      text-align: center;
      margin-bottom: 3px;
      padding: 4px;
      background: white;
      border-radius: 8px;
      font-weight: 900;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      font-size: 11px;
      border: 2px solid #FF6B9D;
      flex-shrink: 0;
    }
    
    .message.win { color: #16a34a; font-size: 13px; border-color: #16a34a; }
    .message.lose { color: #dc2626; font-size: 12px; border-color: #dc2626; }
    
    .found-groups {
      margin-bottom: 3px;
      display: flex;
      flex-direction: column;
      gap: 3px;
      flex-shrink: 0;
    }
    
    .group-row {
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
      padding: 4px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      border: 2px solid white;
    }
    
    .group-label {
      font-size: 9px;
      font-weight: 900;
      color: white;
      text-align: center;
      margin-bottom: 3px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
    }
    
    .group-items {
      display: flex;
      justify-content: center;
      gap: 3px;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 5px;
      margin-bottom: 4px;
      flex-grow: 1;
      align-content: center;
    }
    
    .card {
      font-size: 28px;
      padding: 8px;
      text-align: center;
      border-radius: 8px;
      background: linear-gradient(135deg, #FFFFFF 0%, #F0F8FF 100%);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: all 0.2s;
      user-select: none;
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #FFD93D;
    }
    
    .card:hover { transform: translateY(-2px); border-color: #FF6B9D; }
    .card.selected {
      background: linear-gradient(135deg, #FFD93D 0%, #FFA500 100%);
      border: 2px solid #FF1493;
      transform: scale(1.05);
    }
    .card.found {
      background: linear-gradient(135deg, #00FA9A 0%, #00CED1 100%);
      color: white;
      font-size: 24px;
      border: 2px solid white;
    }
    
    .buttons {
      display: flex;
      gap: 4px;
      justify-content: center;
      margin-bottom: 3px;
      flex-shrink: 0;
    }
    
    .btn {
      padding: 6px 10px;
      font-size: 11px;
      font-weight: 900;
      border-radius: 6px;
      border: 2px solid white;
      cursor: pointer;
      background: linear-gradient(135deg, #C8B6FF 0%, #9D84FF 100%);
      color: white;
      transition: all 0.2s;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    
    .btn.primary {
      background: linear-gradient(135deg, #FF6B9D 0%, #FF1493 100%);
      font-size: 12px;
    }
    
    .btn:disabled { opacity: 0.4; cursor: not-allowed; }
    
    .hint {
      text-align: center;
      color: white;
      font-size: 9px;
      font-weight: 700;
      flex-shrink: 0;
    }
    
    .confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }
    
    @media (max-width: 768px) {
      .card { font-size: 26px; padding: 6px; }
      .card.found { font-size: 22px; }
    }
  </style>
</head>
<body>
  <!-- HOME SCREEN -->
  <div id="homeScreen" class="screen home-screen active">
    <h1 class="home-title">Kids Connections</h1>
    
    <div class="daily-info">
      <h2>Today's Challenge</h2>
      <p id="todayDate"></p>
      <p>Play 2 puzzles per level</p>
      <div class="score-display" id="todayScore">0/600</div>
    </div>
    
    <div class="difficulty-buttons">
      <button class="difficulty-btn easy" id="easyBtn">
        üòä Easy
        <div class="puzzle-status" id="easyStatus">0/2 done</div>
      </button>
      <button class="difficulty-btn medium" id="mediumBtn">
        ü§î Medium
        <div class="puzzle-status" id="mediumStatus">0/2 done</div>
      </button>
      <button class="difficulty-btn hard" id="hardBtn">
        ü§Ø Hard
        <div class="puzzle-status" id="hardStatus">0/2 done</div>
      </button>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" class="screen">
    <div class="container">
      <div class="header">
        <button class="home-btn" id="homeBtn">üè†</button>
        <h1 id="gameTitle">Kids Connections</h1>
        <button class="sound-toggle" id="soundToggle">üîä</button>
      </div>
      
      <div class="puzzle-selector">
        <button class="nav-btn" id="prevBtn">‚Üê</button>
        <span class="puzzle-name" id="puzzleName"></span>
        <button class="nav-btn" id="nextBtn">‚Üí</button>
      </div>
      
      <div class="strikes" id="strikes"></div>
      <div class="message" id="message"></div>
      <div class="found-groups" id="foundGroups"></div>
      <div class="grid" id="grid"></div>
      
      <div class="buttons">
        <button class="btn primary" id="checkBtn">Check (0/4)</button>
        <button class="btn" id="shuffleBtn">Shuffle</button>
        <button class="btn" id="restartBtn">Restart</button>
      </div>
      
      <div class="hint">Tap to deselect!</div>
    </div>
  </div>

  <canvas id="confettiCanvas" class="confetti-canvas"></canvas>

  <script>
    // PUZZLE CATALOGUE - add in additional puzzles here
    
const puzzleCatalogue = {
  easy: [
    // Week 1
    { name: "Set 1", groups: [
      { name: "Fruits", items: ["üçé", "üçå", "üçá", "üçä"] },
      { name: "Animals", items: ["üê∂", "üê±", "üê∑", "üêÆ"] },
      { name: "Vehicles", items: ["üöó", "üöå", "üö≤", "‚úàÔ∏è"] },
      { name: "Weather", items: ["‚òÄÔ∏è", "üåßÔ∏è", "üå©Ô∏è", "‚ùÑÔ∏è"] }
    ]},
    { name: "Set 2", groups: [
      { name: "Colors", items: ["‚ù§Ô∏è", "üíô", "üíö", "üíõ"] },
      { name: "Sports", items: ["‚öΩ", "üèÄ", "‚öæ", "üèà"] },
      { name: "Food", items: ["üçï", "üçî", "üåÆ", "üçú"] },
      { name: "Sea Life", items: ["üê†", "üêô", "ü¶à", "üê¨"] }
    ]},
    { name: "Set 3", groups: [
      { name: "Faces", items: ["üòÄ", "üòÇ", "üòç", "üòé"] },
      { name: "Birds", items: ["ü¶Ö", "ü¶Ü", "ü¶â", "üêß"] },
      { name: "Flowers", items: ["üåπ", "üåª", "üå∑", "üå∫"] },
      { name: "Shapes", items: ["‚≠ê", "‚ù§Ô∏è", "‚ö´", "üîµ"] }
    ]},
    { name: "Set 4", groups: [
      { name: "Farm", items: ["üêî", "üê¥", "üêè", "üêÑ"] },
      { name: "Snacks", items: ["üçø", "üç™", "üç©", "üßÅ"] },
      { name: "Bugs", items: ["üêù", "üêû", "ü¶ã", "üêõ"] },
      { name: "Desserts", items: ["üç∞", "üç¶", "üç´", "üçÆ"] }
    ]},
    
    // Week 2
    { name: "Set 5", groups: [
      { name: "Drinks", items: ["ü•§", "üßÉ", "ü•õ", "‚òï"] },
      { name: "Jungle", items: ["ü¶Å", "üêò", "ü¶í", "üêí"] },
      { name: "Toys", items: ["üéÆ", "üß∏", "üé≤", "ü™Ä"] },
      { name: "School", items: ["üìö", "‚úèÔ∏è", "üìè", "üñçÔ∏è"] }
    ]},
    { name: "Set 6", groups: [
      { name: "Pets", items: ["üêï", "üêà", "üêá", "üêπ"] },
      { name: "Fruit", items: ["üçì", "üçí", "üçë", "üçâ"] },
      { name: "Tools", items: ["üî®", "üîß", "‚úÇÔ∏è", "üìå"] },
      { name: "Music", items: ["üéµ", "üé∂", "üé∏", "üéπ"] }
    ]},
    { name: "Set 7", groups: [
      { name: "Time", items: ["‚è∞", "‚è±Ô∏è", "‚åõ", "‚åö"] },
      { name: "Plants", items: ["üå≤", "üå≥", "üå¥", "üåµ"] },
      { name: "Fast", items: ["üöÄ", "‚ö°", "üí®", "üèÉ"] },
      { name: "Night", items: ["üåô", "‚≠ê", "üåü", "‚ú®"] }
    ]},
    { name: "Set 8", groups: [
      { name: "Baby", items: ["üë∂", "üçº", "üë£", "üß∑"] },
      { name: "Cold", items: ["‚ùÑÔ∏è", "üßä", "‚õÑ", "ü•∂"] },
      { name: "Hot", items: ["üî•", "‚òÄÔ∏è", "üå∂Ô∏è", "ü•µ"] },
      { name: "Water", items: ["üíß", "üåä", "üèä", "üöø"] }
    ]},
    
    // Week 3
    { name: "Set 9", groups: [
      { name: "Space", items: ["üåô", "‚≠ê", "ü™ê", "üõ∏"] },
      { name: "Clothes", items: ["üëï", "üëñ", "üëó", "üëû"] },
      { name: "Hands", items: ["üëã", "üëè", "üëç", "‚úã"] },
      { name: "Party", items: ["üéà", "üéÇ", "üéÅ", "üéâ"] }
    ]},
    { name: "Set 10", groups: [
      { name: "Beach", items: ["üèñÔ∏è", "üèÑ", "üåä", "üêö"] },
      { name: "Home", items: ["üè†", "üõèÔ∏è", "üö™", "ü™ü"] },
      { name: "Kitchen", items: ["üçΩÔ∏è", "ü•Ñ", "üç¥", "üî™"] },
      { name: "Round", items: ["‚öΩ", "üèÄ", "üéæ", "‚öæ"] }
    ]},
    { name: "Set 11", groups: [
      { name: "Red", items: ["üçé", "üçì", "üåπ", "‚ù§Ô∏è"] },
      { name: "Yellow", items: ["üçã", "üåª", "‚≠ê", "üçå"] },
      { name: "Green", items: ["üçÄ", "üå≤", "üê∏", "ü•í"] },
      { name: "Blue", items: ["üåä", "üíô", "ü¶ã", "üê≥"] }
    ]},
    { name: "Set 12", groups: [
      { name: "Wild", items: ["ü¶Å", "üêØ", "üêª", "ü¶ä"] },
      { name: "Small", items: ["üêú", "üêù", "üêõ", "üêû"] },
      { name: "Flying", items: ["ü¶Ö", "ü¶Ü", "üê¶", "ü¶ú"] },
      { name: "Pets", items: ["üêï", "üêà", "üêá", "üêπ"] }
    ]},
    
    // Week 4
    { name: "Set 13", groups: [
      { name: "Sweet", items: ["üç∞", "üç™", "üç≠", "üßÅ"] },
      { name: "Pizza", items: ["üçï", "üßÄ", "üçÖ", "ü´í"] },
      { name: "Breakfast", items: ["ü•û", "ü•ì", "üç≥", "ü•ê"] },
      { name: "Fruits", items: ["üçé", "üçä", "üçá", "üçì"] }
    ]},
    { name: "Set 14", groups: [
      { name: "Happy", items: ["üòÄ", "üòÑ", "üòä", "ü•≥"] },
      { name: "Love", items: ["üòç", "ü•∞", "üòò", "üíï"] },
      { name: "Cool", items: ["üòé", "ü§©", "üòè", "ü§†"] },
      { name: "Silly", items: ["ü§™", "üòú", "üòù", "ü§ì"] }
    ]},
    { name: "Set 15", groups: [
      { name: "Transport", items: ["üöÇ", "üöÅ", "‚õµ", "üöï"] },
      { name: "Buildings", items: ["üè†", "üè´", "üè•", "üè™"] },
      { name: "Nature", items: ["üå≥", "üå∫", "üçÑ", "üåà"] },
      { name: "Sky", items: ["‚òÅÔ∏è", "‚õÖ", "üå§Ô∏è", "üå•Ô∏è"] }
    ]}
  ],
  
  medium: [
    // Week 1
    { name: "Set 1", groups: [
      { name: "Buildings", items: ["üè†", "üè´", "üè•", "üè™"] },
      { name: "Nature", items: ["üå≤", "üåª", "üçÑ", "üåµ"] },
      { name: "Space", items: ["üåô", "‚≠ê", "üåé", "üöÄ"] },
      { name: "Party", items: ["üéà", "üéÇ", "üéÅ", "üéâ"] }
    ]},
    { name: "Set 2", groups: [
      { name: "Tools", items: ["üî®", "üîß", "‚úÇÔ∏è", "üî™"] },
      { name: "Music", items: ["üé∏", "üéπ", "ü•Å", "üé∫"] },
      { name: "Clothes", items: ["üëï", "üëñ", "üëó", "üëû"] },
      { name: "Faces", items: ["üòÄ", "üòÇ", "üòç", "üòé"] }
    ]},
    { name: "Set 3", groups: [
      { name: "Office", items: ["üíº", "üìé", "üìå", "üñáÔ∏è"] },
      { name: "Tech", items: ["üíª", "üì±", "‚å®Ô∏è", "üñ±Ô∏è"] },
      { name: "Art", items: ["üé®", "üñåÔ∏è", "‚úèÔ∏è", "üñçÔ∏è"] },
      { name: "Books", items: ["üìñ", "üìö", "üìù", "üìÑ"] }
    ]},
    { name: "Set 4", groups: [
      { name: "Sports", items: ["üèÉ", "üèä", "üö¥", "‚õ∑Ô∏è"] },
      { name: "Signs", items: ["‚ö†Ô∏è", "üö´", "‚úÖ", "‚ùå"] },
      { name: "Weather", items: ["üåà", "‚ö°", "üå™Ô∏è", "üå´Ô∏è"] },
      { name: "Seasons", items: ["üå∏", "‚òÄÔ∏è", "üçÇ", "‚ùÑÔ∏è"] }
    ]},
    
    // Week 2
    { name: "Set 5", groups: [
      { name: "Fast", items: ["üöÄ", "‚ö°", "üèéÔ∏è", "üí®"] },
      { name: "Slow", items: ["üêå", "ü¶•", "üê¢", "‚è≥"] },
      { name: "Big", items: ["üêò", "ü¶ï", "üèîÔ∏è", "üåç"] },
      { name: "Small", items: ["üêú", "ü¶†", "üìå", "üíé"] }
    ]},
    { name: "Set 6", groups: [
      { name: "Light", items: ["üí°", "üî¶", "üïØÔ∏è", "üî•"] },
      { name: "Sound", items: ["üîä", "üì¢", "üîî", "üì£"] },
      { name: "Time", items: ["‚è∞", "‚è±Ô∏è", "‚åõ", "‚åö"] },
      { name: "Money", items: ["üí∞", "üíµ", "üí≥", "ü™ô"] }
    ]},
    { name: "Set 7", groups: [
      { name: "Medical", items: ["üíä", "üíâ", "ü©π", "üå°Ô∏è"] },
      { name: "Garden", items: ["üåª", "üå∑", "üåπ", "üå∫"] },
      { name: "Kitchen", items: ["üç≥", "ü•ò", "üî™", "ü•Ñ"] },
      { name: "Bathroom", items: ["üöø", "üßº", "ü™•", "üß¥"] }
    ]},
    { name: "Set 8", groups: [
      { name: "Communication", items: ["üìû", "üìß", "üí¨", "üì¨"] },
      { name: "Travel", items: ["üó∫Ô∏è", "üß≥", "‚úàÔ∏è", "üèñÔ∏è"] },
      { name: "Safety", items: ["üõ°Ô∏è", "üîí", "üö®", "‚ö†Ô∏è"] },
      { name: "Celebration", items: ["üéä", "üéÜ", "ü•≥", "üçæ"] }
    ]},
    
    // Week 3
    { name: "Set 9", groups: [
      { name: "Recycling", items: ["‚ôªÔ∏è", "üóëÔ∏è", "üì¶", "üß¥"] },
      { name: "Energy", items: ["üîã", "‚ö°", "‚òÄÔ∏è", "üí®"] },
      { name: "Water", items: ["üíß", "üåä", "üöø", "‚õ≤"] },
      { name: "Earth", items: ["üåç", "üå±", "üå≥", "üèîÔ∏è"] }
    ]},
    { name: "Set 10", groups: [
      { name: "Feelings", items: ["‚ù§Ô∏è", "üíî", "üò¢", "üòä"] },
      { name: "Body", items: ["üëÅÔ∏è", "üëÇ", "üëÉ", "üëÑ"] },
      { name: "Health", items: ["üí™", "üß†", "‚ù§Ô∏è‚Äçü©π", "üèÉ"] },
      { name: "Food Groups", items: ["ü•¶", "üçé", "ü•©", "ü•õ"] }
    ]},
    { name: "Set 11", groups: [
      { name: "Morning", items: ["üåÖ", "‚òï", "ü•ê", "üì∞"] },
      { name: "Afternoon", items: ["‚òÄÔ∏è", "üçΩÔ∏è", "üìö", "üíº"] },
      { name: "Evening", items: ["üåÜ", "üçï", "üì∫", "üéÆ"] },
      { name: "Night", items: ["üåô", "üò¥", "üõèÔ∏è", "üí§"] }
    ]},
    { name: "Set 12", groups: [
      { name: "Winter", items: ["‚õÑ", "üéø", "üß£", "üß§"] },
      { name: "Spring", items: ["üå∏", "üê£", "üå±", "üåº"] },
      { name: "Summer", items: ["üèñÔ∏è", "üçâ", "‚òÄÔ∏è", "üèä"] },
      { name: "Fall", items: ["üçÇ", "üéÉ", "üçÅ", "üå∞"] }
    ]},
    
    // Week 4
    { name: "Set 13", groups: [
      { name: "Directions", items: ["‚¨ÜÔ∏è", "‚¨áÔ∏è", "‚¨ÖÔ∏è", "‚û°Ô∏è"] },
      { name: "Shapes", items: ["‚≠ê", "‚ù§Ô∏è", "‚ö´", "üî∫"] },
      { name: "Numbers", items: ["1Ô∏è‚É£", "2Ô∏è‚É£", "3Ô∏è‚É£", "4Ô∏è‚É£"] },
      { name: "Letters", items: ["üî§", "üî°", "üî†", "üìù"] }
    ]},
    { name: "Set 14", groups: [
      { name: "Cleaning", items: ["üßπ", "üßΩ", "üßº", "üß∫"] },
      { name: "Cooking", items: ["üç≥", "ü•ò", "üî™", "üßÇ"] },
      { name: "Sewing", items: ["üßµ", "ü™°", "‚úÇÔ∏è", "üß∂"] },
      { name: "Fixing", items: ["üî®", "üîß", "ü™õ", "‚öôÔ∏è"] }
    ]},
    { name: "Set 15", groups: [
      { name: "Circus", items: ["üé™", "ü§π", "üé≠", "üé†"] },
      { name: "Magic", items: ["üé©", "‚ú®", "ü™Ñ", "üîÆ"] },
      { name: "Pirate", items: ["üè¥‚Äç‚ò†Ô∏è", "üíé", "üó∫Ô∏è", "‚öì"] },
      { name: "Castle", items: ["üè∞", "üëë", "üó°Ô∏è", "üõ°Ô∏è"] }
    ]}
  ],
  
  hard: [
    // Week 1
    { name: "Set 1", groups: [
      { name: "Time", items: ["‚è∞", "‚è±Ô∏è", "‚åõ", "üïê"] },
      { name: "Tech", items: ["üíª", "üì±", "‚å®Ô∏è", "üñ±Ô∏è"] },
      { name: "Books", items: ["üìñ", "üìö", "üìù", "‚úèÔ∏è"] },
      { name: "Travel", items: ["üó∫Ô∏è", "üß≥", "‚úàÔ∏è", "üèñÔ∏è"] }
    ]},
    { name: "Set 2", groups: [
      { name: "Winter", items: ["‚õÑ", "üéø", "üß£", "üß§"] },
      { name: "Night", items: ["üåô", "‚≠ê", "ü¶â", "üåÉ"] },
      { name: "Garden", items: ["üåª", "üå∑", "üåπ", "üå∫"] },
      { name: "Kitchen", items: ["üç≥", "ü•ò", "üî™", "ü•Ñ"] }
    ]},
    { name: "Set 3", groups: [
      { name: "Science", items: ["üî¨", "üß™", "üß¨", "‚öóÔ∏è"] },
      { name: "Math", items: ["‚ûï", "‚ûñ", "‚úñÔ∏è", "‚ûó"] },
      { name: "Geography", items: ["üó∫Ô∏è", "üß≠", "üåç", "üèîÔ∏è"] },
      { name: "History", items: ["üìú", "üèõÔ∏è", "üëë", "‚öîÔ∏è"] }
    ]},
    { name: "Set 4", groups: [
      { name: "Emotions", items: ["‚ù§Ô∏è", "üíî", "üòä", "üò¢"] },
      { name: "Thoughts", items: ["üí≠", "üí°", "üß†", "ü§î"] },
      { name: "Communication", items: ["üí¨", "üìû", "‚úâÔ∏è", "üì¢"] },
      { name: "Relationships", items: ["üë®‚Äçüë©‚Äçüëß", "üíë", "üë´", "ü§ù"] }
    ]},
    
    // Week 2
    { name: "Set 5", groups: [
      { name: "Beginning", items: ["üå±", "üê£", "üåÖ", "üë∂"] },
      { name: "Middle", items: ["üå≥", "üêî", "‚òÄÔ∏è", "üßë"] },
      { name: "End", items: ["üçÇ", "ü•ö", "üåá", "üë¥"] },
      { name: "Cycle", items: ["‚ôªÔ∏è", "üîÑ", "‚è∞", "üåô"] }
    ]},
    { name: "Set 6", groups: [
      { name: "Creation", items: ["üé®", "‚úèÔ∏è", "üé≠", "üéµ"] },
      { name: "Destruction", items: ["üí•", "üî•", "‚ö°", "üå™Ô∏è"] },
      { name: "Growth", items: ["üìà", "üå±", "üí™", "üß†"] },
      { name: "Decay", items: ["üìâ", "üçÇ", "‚è≥", "ü•Ä"] }
    ]},
    { name: "Set 7", groups: [
      { name: "Vision", items: ["üëÅÔ∏è", "üëì", "üîç", "üí°"] },
      { name: "Hearing", items: ["üëÇ", "üîä", "üéµ", "üì¢"] },
      { name: "Touch", items: ["‚úã", "ü§ù", "üíÜ", "üß§"] },
      { name: "Taste", items: ["üëÖ", "üç¥", "üç∞", "üå∂Ô∏è"] }
    ]},
    { name: "Set 8", groups: [
      { name: "Past", items: ["üìú", "‚è™", "ü¶ï", "üèõÔ∏è"] },
      { name: "Present", items: ["üì±", "‚è∏Ô∏è", "üèôÔ∏è", "üì∞"] },
      { name: "Future", items: ["üöÄ", "‚è©", "ü§ñ", "üîÆ"] },
      { name: "Timeless", items: ["‚ôæÔ∏è", "üåå", "‚è≥", "üíé"] }
    ]},
    
    // Week 3
    { name: "Set 9", groups: [
      { name: "Leaders", items: ["üëë", "üìä", "üé§", "üèÜ"] },
      { name: "Helpers", items: ["ü§ù", "üí™", "üõ†Ô∏è", "üÜò"] },
      { name: "Learners", items: ["üìö", "üéì", "üß†", "üìù"] },
      { name: "Teachers", items: ["üë®‚Äçüè´", "üìñ", "üí°", "üéØ"] }
    ]},
    { name: "Set 10", groups: [
      { name: "Problem", items: ["‚ö†Ô∏è", "‚ùå", "üö´", "‚õî"] },
      { name: "Solution", items: ["‚úÖ", "üí°", "üîß", "üéØ"] },
      { name: "Question", items: ["‚ùì", "ü§î", "üîç", "üìã"] },
      { name: "Answer", items: ["üí¨", "üìñ", "üéì", "‚úîÔ∏è"] }
    ]},
    { name: "Set 11", groups: [
      { name: "Air", items: ["üí®", "üéà", "ü™Å", "üå¨Ô∏è"] },
      { name: "Earth", items: ["üåç", "üèîÔ∏è", "üå±", "ü™®"] },
      { name: "Fire", items: ["üî•", "‚òÄÔ∏è", "‚ö°", "üåã"] },
      { name: "Water", items: ["üíß", "üåä", "‚ùÑÔ∏è", "‚òî"] }
    ]},
    { name: "Set 12", groups: [
      { name: "Cause", items: ["‚û°Ô∏è", "üí•", "üéØ", "üîë"] },
      { name: "Effect", items: ["‚¨ÖÔ∏è", "üí´", "üéÅ", "üèÜ"] },
      { name: "Action", items: ["üèÉ", "üî®", "‚úçÔ∏è", "üé¨"] },
      { name: "Result", items: ["üèÅ", "‚úîÔ∏è", "üéØ", "üíØ"] }
    ]},
    
    // Week 4
    { name: "Set 13", groups: [
      { name: "Individual", items: ["üë§", "üßç", "üôã", "üí≠"] },
      { name: "Pair", items: ["üë•", "üíë", "ü§ù", "üë´"] },
      { name: "Group", items: ["üë®‚Äçüë©‚Äçüëß‚Äçüë¶", "üèòÔ∏è", "üè´", "üè¢"] },
      { name: "Community", items: ["üåç", "üèôÔ∏è", "ü§≤", "üåê"] }
    ]},
    { name: "Set 14", groups: [
      { name: "Input", items: ["‚¨áÔ∏è", "üì•", "üé§", "‚å®Ô∏è"] },
      { name: "Process", items: ["‚öôÔ∏è", "üîÑ", "üí≠", "üßÆ"] },
      { name: "Output", items: ["‚¨ÜÔ∏è", "üì§", "üîä", "üñ®Ô∏è"] },
      { name: "Feedback", items: ["üîÅ", "üí¨", "üìä", "‚úÖ"] }
    ]},
    { name: "Set 15", groups: [
      { name: "Observation", items: ["üëÄ", "üîç", "üìπ", "üìä"] },
      { name: "Question", items: ["‚ùì", "ü§î", "üí≠", "üìã"] },
      { name: "Hypothesis", items: ["üí°", "üìù", "üéØ", "üß™"] },
      { name: "Experiment", items: ["üî¨", "‚öóÔ∏è", "üìà", "‚úÖ"] }
    ]}
  ]
};
    // DAILY PUZZLE SELECTION
    function getDayOfYear() {
      const now = new Date();
      const start = new Date(now.getFullYear(), 0, 0);
      const diff = now - start;
      const oneDay = 1000 * 60 * 60 * 24;
      return Math.floor(diff / oneDay);
    }

    function getTodaysPuzzles(difficulty) {
      const day = getDayOfYear();
      const puzzles = puzzleCatalogue[difficulty];
      const total = puzzles.length;
      const index1 = (day * 2) % total;
      const index2 = (day * 2 + 1) % total;
      return [puzzles[index1], puzzles[index2]];
    }

    // SCORE TRACKING
    function getTodayKey() {
      const today = new Date();
      return `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;
    }

    function loadDailyProgress() {
      const key = getTodayKey();
      const data = localStorage.getItem(`daily_${key}`);
      return data ? JSON.parse(data) : {
        easy: { completed: [] },
        medium: { completed: [] },
        hard: { completed: [] }
      };
    }

    function saveDailyProgress(progress) {
      const key = getTodayKey();
      localStorage.setItem(`daily_${key}`, JSON.stringify(progress));
    }

    function calculateScore(progress) {
      let score = 0;
      ['easy', 'medium', 'hard'].forEach(diff => {
        score += progress[diff].completed.length * 100;
      });
      return score;
    }

    // GAME STATE
    let currentDifficulty = 'easy';
    let currentPuzzles = [];
    let currentPuzzleIndex = 0;
    let items = [];
    let selected = [];
    let found = [];
    let strikes = 0;
    let soundEnabled = true;
    const maxStrikes = 4;
    let dailyProgress = loadDailyProgress();

    // CONFETTI
    const canvas = document.getElementById('confettiCanvas');
    const ctx = canvas.getContext('2d');
    let confettiParticles = [];
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class ConfettiPiece {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = -20;
        this.size = Math.random() * 10 + 5;
        this.speedY = Math.random() * 3 + 2;
        this.speedX = Math.random() * 2 - 1;
        this.color = ['#FFD93D', '#FF6B9D', '#C8B6FF', '#00FA9A', '#00CED1'][Math.floor(Math.random() * 5)];
      }
      update() {
        this.y += this.speedY;
        this.x += this.speedX;
        return this.y <= canvas.height;
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x, this.y, this.size, this.size);
      }
    }

    function startConfetti() {
      for (let i = 0; i < 200; i++) confettiParticles.push(new ConfettiPiece());
      animateConfetti();
    }

    function animateConfetti() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      confettiParticles = confettiParticles.filter(p => {
        p.update();
        p.draw();
        return p.y <= canvas.height;
      });
      if (confettiParticles.length > 0) requestAnimationFrame(animateConfetti);
    }

    // SOUNDS
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playTone(freq, dur, vol = 0.3) {
      if (!soundEnabled) return;
      try {
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.frequency.value = freq;
        gain.gain.setValueAtTime(vol, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + dur);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + dur);
      } catch (e) {}
    }
    
    const sounds = {
      click: () => playTone(800, 0.1),
      correct: () => {
        playTone(523, 0.15);
        setTimeout(() => playTone(659, 0.15), 100);
        setTimeout(() => playTone(784, 0.2), 200);
      },
      wrong: () => {
        playTone(200, 0.15);
        setTimeout(() => playTone(150, 0.2), 100);
      },
      clap: () => {
        const claps = [
          { time: 0, freq: 200, vol: 0.5 },
          { time: 100, freq: 220, vol: 0.5 },
          { time: 200, freq: 210, vol: 0.5 },
          { time: 400, freq: 200, vol: 0.6 },
          { time: 500, freq: 230, vol: 0.6 },
          { time: 600, freq: 220, vol: 0.6 },
          { time: 800, freq: 210, vol: 0.7 },
          { time: 900, freq: 230, vol: 0.7 },
          { time: 1000, freq: 200, vol: 0.7 }
        ];
        claps.forEach(c => setTimeout(() => playTone(c.freq, 0.08, c.vol), c.time));
      }
    };

    // UTILITY
    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function makeItems() {
      const puzzle = currentPuzzles[currentPuzzleIndex];
      return shuffle(puzzle.groups.flatMap(g => 
        g.items.map(emoji => ({ emoji, group: g.name }))
      ));
    }

    function isFound(item) {
      return found.some(g => g.items.some(i => i.emoji === item.emoji));
    }

    function isSelected(item) {
      return selected.some(s => s.emoji === item.emoji);
    }

    // SCREEN MANAGEMENT
    function showScreen(screenId) {
      document.getElementById('homeScreen').classList.remove('active');
      document.getElementById('gameScreen').classList.remove('active');
      document.getElementById(screenId).classList.add('active');
    }

    function updateHomeScreen() {
      const today = new Date();
      document.getElementById('todayDate').textContent = today.toDateString();
      const score = calculateScore(dailyProgress);
      document.getElementById('todayScore').textContent = `${score}/600`;
      
      ['easy', 'medium', 'hard'].forEach(diff => {
        const completed = dailyProgress[diff].completed.length;
        document.getElementById(`${diff}Status`).textContent = `${completed}/2 done`;
      });
    }

    function startGame(difficulty) {
      currentDifficulty = difficulty;
      currentPuzzles = getTodaysPuzzles(difficulty);
      currentPuzzleIndex = 0;
      showScreen('gameScreen');
      setTimeout(() => restart(), 50);
    }

    function goHome() {
      showScreen('homeScreen');
      updateHomeScreen();
      confettiParticles = [];
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // RENDER
    function render() {
      renderPuzzleName();
      renderStrikes();
      renderFoundGroups();
      renderGrid();
      updateButtons();
    }

    function renderPuzzleName() {
      document.getElementById('puzzleName').textContent = 
        `${currentDifficulty.toUpperCase()} ${currentPuzzles[currentPuzzleIndex].name}`;
      document.getElementById('prevBtn').disabled = currentPuzzleIndex === 0;
      document.getElementById('nextBtn').disabled = currentPuzzleIndex === currentPuzzles.length - 1;
    }

    function renderStrikes() {
      const gameWon = found.length === currentPuzzles[currentPuzzleIndex].groups.length;
      const gameLost = strikes >= maxStrikes;
      
      if (gameWon || gameLost) {
        document.getElementById('strikes').style.display = 'none';
      } else {
        document.getElementById('strikes').style.display = 'block';
        document.getElementById('strikes').textContent = 
          `${'‚ù§Ô∏è'.repeat(maxStrikes - strikes)}${'üñ§'.repeat(strikes)}`;
      }
    }

    function renderFoundGroups() {
      const container = document.getElementById('foundGroups');
      container.innerHTML = '';
      found.forEach(group => {
        const row = document.createElement('div');
        row.className = 'group-row';
        const label = document.createElement('div');
        label.className = 'group-label';
        label.textContent = group.name;
        row.appendChild(label);
        const itemsDiv = document.createElement('div');
        itemsDiv.className = 'group-items';
        group.items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card found';
          card.textContent = item.emoji;
          itemsDiv.appendChild(card);
        });
        row.appendChild(itemsDiv);
        container.appendChild(row);
      });
    }

    function renderGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      items.forEach((item) => {
        if (!isFound(item)) {
          const card = document.createElement('div');
          card.className = 'card';
          if (isSelected(item)) card.classList.add('selected');
          card.textContent = item.emoji;
          card.onclick = () => clickCard(item);
          grid.appendChild(card);
        }
      });
    }

    function updateButtons() {
      const gameWon = found.length === currentPuzzles[currentPuzzleIndex].groups.length;
      const gameLost = strikes >= maxStrikes;
      document.getElementById('checkBtn').textContent = `Check (${selected.length}/4)`;
      document.getElementById('checkBtn').disabled = selected.length !== 4 || gameWon || gameLost;
      document.getElementById('shuffleBtn').disabled = gameWon || gameLost;
      document.getElementById('restartBtn').textContent = (gameWon || gameLost) ? 'Again' : 'Restart';
    }

    function showMessage(text, type = '') {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = 'message ' + type;
      msg.style.display = text ? 'block' : 'none';
    }

    // GAME LOGIC
    function clickCard(item) {
      const gameWon = found.length === currentPuzzles[currentPuzzleIndex].groups.length;
      const gameLost = strikes >= maxStrikes;
      if (isFound(item) || gameLost || gameWon) return;
      
      sounds.click();
      if (isSelected(item)) {
        selected = selected.filter(s => s.emoji !== item.emoji);
      } else if (selected.length < 4) {
        selected.push(item);
        showMessage('');
      }
      render();
    }

    function checkGroup() {
      if (selected.length !== 4) return;
      
      const allSame = selected.every(it => it.group === selected[0].group);
      
      if (allSame) {
        sounds.correct();
        const groupName = selected[0].group;
        found.push({ name: groupName, items: selected });
        showMessage(`‚úÖ ${groupName}!`);
        
        if (found.length === currentPuzzles[currentPuzzleIndex].groups.length) {
          sounds.clap();
          showMessage('üéâ Complete!', 'win');
          startConfetti();
          
          const puzzleId = `${currentDifficulty}-${currentPuzzleIndex}`;
          if (!dailyProgress[currentDifficulty].completed.includes(puzzleId)) {
            dailyProgress[currentDifficulty].completed.push(puzzleId);
            saveDailyProgress(dailyProgress);
          }
        }
      } else {
        sounds.wrong();
        strikes++;
        if (strikes >= maxStrikes) {
          showMessage('‚ùå Game Over!', 'lose');
        } else {
          showMessage(`‚ùå ${maxStrikes - strikes} left`);
        }
      }
      
      selected = [];
      render();
    }

    function shuffleCards() {
      sounds.click();
      items = shuffle(items);
      render();
    }

    function restart() {
      items = makeItems();
      selected = [];
      found = [];
      strikes = 0;
      showMessage('');
      confettiParticles = [];
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      render();
    }

    function changePuzzle(direction) {
      const newIndex = currentPuzzleIndex + direction;
      if (newIndex >= 0 && newIndex < currentPuzzles.length) {
        currentPuzzleIndex = newIndex;
        restart();
      }
    }

    // EVENT LISTENERS
    window.addEventListener('DOMContentLoaded', function() {
      document.getElementById('easyBtn').addEventListener('click', () => startGame('easy'));
      document.getElementById('mediumBtn').addEventListener('click', () => startGame('medium'));
      document.getElementById('hardBtn').addEventListener('click', () => startGame('hard'));
      document.getElementById('checkBtn').addEventListener('click', checkGroup);
      document.getElementById('shuffleBtn').addEventListener('click', shuffleCards);
      document.getElementById('restartBtn').addEventListener('click', restart);
      document.getElementById('prevBtn').addEventListener('click', () => changePuzzle(-1));
      document.getElementById('nextBtn').addEventListener('click', () => changePuzzle(1));
      document.getElementById('soundToggle').addEventListener('click', () => {
        soundEnabled = !soundEnabled;
        document.getElementById('soundToggle').textContent = soundEnabled ? 'üîä' : 'üîá';
      });
      document.getElementById('homeBtn').addEventListener('click', goHome);
      
      updateHomeScreen();
    });
  </script>
</body>
</html>